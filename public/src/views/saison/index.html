<template>
	<require from="../../resources/value-converters/date"></require>
	<section class="container">
		<h1>${title}</h1>
		<div><i class="material-icons icon-text">today</i>Date limite de paiement: ${saison.datelimitepaiement | date}</div>
		<div><i class="material-icons icon-text">date_range</i>Dur√©e: ${saison.datecommencement | date} - ${saison.datefin | date}</div>
		<div class="top-right">
			<button class="icon-btn" click.trigger="optionsAffiche=!optionsAffiche">
				<i class="material-icons">menu</i>
			</button>
			<ul class="options" if.bind="optionsAffiche">
				<li><button click.trigger="afficherModificationSaison()">Modifier le saison</button></li>
				<li><button click.trigger="afficherAjoutMatch()">Ajouter un match</button></li>
			</ul>
		</div>
		<h2>Matchs</h2>
		<ul class="list">
			<li repeat.for="match of matchs">
				<span><i class="material-icons">today</i>${match.date | date}</span>
				<span><i class="material-icons">access_time</i>${match.heure}</span>
				<span><i class="material-icons">location_on</i>${match.lieu}</span>
				<div class="equipes-match">
					<span><h3>${match.equipes[0].nom}</h3></span>
					<span><h3>${match.equipes[0].ptsmarques} - ${match.equipes[1].ptsmarques}</h3></span>
					<span><h3>${match.equipes[1].nom}</h3></span>
				</div>
				<div class="top-right">
					<button class="icon-btn" click.trigger="afficherModificationMatch(match)"><i class="material-icons">edit</i></button>
					<button class="icon-btn" click.trigger="retirerMatch($index, match)"><i class="material-icons">clear</i></button>
				</div>
			</li>
		</ul>

		<div class="popup-background" if.bind="ajoutMatchAffiche">
      <div class="popup">
        <button class="icon-btn" click.trigger="cancelerAjoutMatch()"><i class="material-icons">clear</i></button>
        <h3>Ajouter un match</h3>
        <input value.bind="nouveauMatch.idmatch" placeholder="IDMatch"/>
        <input type="date" value.bind="nouveauMatch.date | date" placeholder="Date"/>
        <input type="time" value.bind="nouveauMatch.heure" placeholder="Heure"/>
        <input value.bind="nouveauMatch.lieu" placeholder="Lieu"/>
				<select value.bind="match.equipes[0]">
					<option repeat.for="equipe of equipes" disabled.bind="equipe.nom===match.equipes[1].nom && equipe.idligue===match.equipes[1].idligue" model.bind="equipe">${equipe.nom}</option>
				</select>
				<input if.bind="match.equipes[0].nom !== ''" type="number" value.bind="match.equipes[0].ptsmarques" placeholder="Nombre de points A"/>
				<select value.bind="match.equipes[1]">
					<option repeat.for="equipe of equipes" disabled.bind="equipe.nom===match.equipes[0].nom && equipe.idligue===match.equipes[0].idligue" model.bind="equipe">${equipe.nom}</option>
				</select>
        <input if.bind="match.equipes[1].nom !== ''" type="number" value.bind="match.equipes[1].ptsmarques" placeholder="Nombre de points B"/>
        <button class="btn btn-inscription" click.trigger="ajouterMatch()">AJOUTER</button>
      </div>
    </div>

		<div class="popup-background" if.bind="modificationSaisonAffiche">
      <div class="popup">
        <button class="icon-btn" click.trigger="cancelerModificationSaison()"><i class="material-icons">clear</i></button>
        <h3>Modifier le saison ${saison.idsaison}</h3>
        <input type="date" value.bind="saison.datelimitepaiement | date" placeholder="Date limite de paiement"/>
        <input type="date" value.bind="saison.datecommencement | date" placeholder="Date de commencement"/>
        <input type="date" value.bind="saison.datefin | date" placeholder="Date de fin"/>
        <button class="btn btn-inscription" click.trigger="modifierSaison()">SAUVEGARDER</button>
      </div>
    </div>

		<div class="popup-background" if.bind="modificationMatchAffiche">
      <div class="popup">
        <button class="icon-btn" click.trigger="cancelerModificationMatch()"><i class="material-icons">clear</i></button>
        <h3>Modifier le match ${matchAModifier.idmatch}</h3>
        <input type="date" value.bind="matchAModifier.date | date" placeholder="Date"/>
        <input type="time" value.bind="matchAModifier.heure" placeholder="Heure"/>
        <input value.bind="matchAModifier.lieu" placeholder="Lieu"/>
				<input type="number" value.bind="matchAModifier.equipes[0].ptsmarques" placeholder="Nombre de points A"/>
        <input type="number" value.bind="matchAModifier.equipes[1].ptsmarques" placeholder="Nombre de points B"/>
        <button class="btn btn-inscription" click.trigger="modifierMatch()">SAUVEGARDER</button>
      </div>
    </div>

	</section>
</template>
